# Theory-first experiment grid
# This demonstrates the new theory-first parameter format
#
# Theory targets define the desired properties of the data stream and learning problem.
# The data loader will generate synthetic data that enforces these targets.

matrix:
  # Algorithm and accountant
  algo: ["memorypair"]
  accountant: ["zcdp"]
  
  # Theory-first stream targets
  # These are the fundamental constants that define the learning problem
  target_G: [2.0]          # Gradient norm bound
  target_D: [2.0]          # Parameter/domain diameter
  target_c: [0.1]          # Min inverse-Hessian eigenvalue (LBFGS clamp)
  target_C: [10.0]         # Max inverse-Hessian eigenvalue (LBFGS clamp)
  target_lambda: [0.5]     # Strong convexity of loss
  target_PT: [25.0]        # Total path length over horizon T
  target_ST: [50000.0]     # Cumulative squared gradient over T
  
  # Privacy parameters
  rho_total: [0.5, 1.0, 2.0]  # zCDP privacy budget (grid search)
  delta_total: [1e-5]          # Delta for privacy
  
  # Algorithm parameters
  lambda_: [0.8]           # Strong convexity parameter used by algorithm
  lambda_reg: [0.0]        # L2 regularization
  quantile: [0.95]         # Calibration quantile
  D_cap: [10.0]           # Diameter cap for calibration
  
  # Execution parameters
  max_events: [1000]       # Horizon T
  seeds: [1]               # Seeds per grid cell (1 for quick testing)
  bootstrap_iters: [500]   # Bootstrap iterations
  
  # Stream configuration
  dim: [10]                # Feature dimension
  path_style: ["rotating"] # Stream path style
  rotate_angle: [0.01]     # Rotation angle for rotating stream
  
  # Advanced options
  recal_window: [null]     # No recalibration by default
  recal_threshold: [0.3]
  ema_beta: [0.9]
  m_max: [10]
  delta_b: [0.05]
  
  # Feature flags
  adaptive_geometry: [false]
  dynamic_comparator: [true]
  strong_convexity: [false]

# Limit for testing (remove or increase for full grid)
limit: 10
